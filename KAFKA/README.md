## –ö—É—Ä–∞—Ç–æ—Ä —Ä–∞–∑–¥–µ–ª–∞

<img align="left" width="200" src="../png/amp.jpg" />

**–ü–æ–¥–≤–∞–ª—å–Ω—ã–π –ê—Ä—Ç–µ–º**, 
                                                                                                                      _Data Engineer/Data Scientist_

   [–ö–∞–Ω–∞–ª Data Engineer Lab](https://t.me/dataengineerlab)

–•–æ—á–µ—à—å –ø–µ—Ä–µ–π—Ç–∏ –≤ –¥–∞—Ç–∞-–∏–Ω–∂–µ–Ω–µ—Ä–∏—é, –Ω–æ –Ω–µ –∑–Ω–∞–µ—à—å —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å? –ü–∏—à–∏ -  —Å–æ—Å—Ç–∞–≤–∏–º —Ä–µ–∑—é–º–µ, –ø—Ä–æ–¥—É–º–∞–µ–º —Ç–≤–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ [https://t.me/ampodvalniy](https://t.me/ampodvalniy)


–•–æ—á–µ—à—å —É–ª—É—á—à–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ä–∞–∑–¥–µ–ª, –≤–Ω–µ—Å—Ç–∏ –Ω–µ–¥–æ—Å—Ç–∞—é—â–µ–µ –∏–ª–∏ –ø–æ–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É? –ü—Ä–µ–¥–ª–∞–≥–∞–π PR –∏ —Ç–µ–≥–∞–π [@Artemlin6231](https://github.com/Artemlin6231)

## –ù–µ–º–Ω–æ–≥–æ –æ–± —ç—Ç–æ–π –≥–ª–∞–≤–µ
–ü–æ–Ω–∏–º–∞–Ω–∏–µ Hadoop Distributed File System  - –æ–¥–Ω–∞ –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏—Ö—Å—è —Ç–µ–º –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è—Ö, —Ç–∞–∫ —á—Ç–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ –Ω–µ–π —Å—Ç–æ–∏—Ç –∫–∞–∂–¥–æ–º—É –î–∞—Ç–∞-–∏–Ω–∂–µ–Ω–µ—Ä—É.

–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è)


# –û—Å–Ω–æ–≤—ã Apache Kafka

## –í–≤–µ–¥–µ–Ω–∏–µ

**Apache Kafka **  ‚Äî —ç—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö (streaming platform), –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏, —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.


# –í–≤–µ–¥–µ–Ω–∏–µ –≤ –±—Ä–æ–∫–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π

**–ë—Ä–æ–∫–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π** ‚Äî —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–µ –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö (—Å–æ–æ–±—â–µ–Ω–∏–π) –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ –∏–ª–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏. –û–Ω–∏ –≤—ã—Å—Ç—É–ø–∞—é—Ç –≤ —Ä–æ–ª–∏ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞ –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è–º–∏ (–ø—Ä–æ–¥—é—Å–µ—Ä–∞–º–∏) –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º–∏ (–∫–æ–Ω—Å—å—é–º–µ—Ä–∞–º–∏), —Å–Ω–∏–∂–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –ø–æ–≤—ã—à–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –Ω–∞–¥—ë–∂–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö.

---

## –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—Ä–æ–∫–µ—Ä–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏—ë–º —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π (–ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤).
- –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π.
- –ù–∞–¥—ë–∂–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º (–∫–æ–Ω—Å—å—é–º–µ—Ä–∞–º).

### –°–Ω–∏–∂–µ–Ω–∏–µ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ: –ø–æ–ª—É—á–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ —Å–Ω–∏–∂–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏.

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∑–∞ —Å—á—ë—Ç **–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è** –∏ **—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏**.

### –∞–¥—ë–∂–Ω–æ—Å—Ç—å
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ—è—Ö –∏–ª–∏ –æ—Ç–∫–∞–∑–∞—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

---

> –ë—Ä–æ–∫–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π —è–≤–ª—è—é—Ç—Å—è –æ—Å–Ω–æ–≤–æ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º.


# Apache Kafka: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

## –ß—Ç–æ —Ç–∞–∫–æ–µ Apache Kafka?

**Apache Kafka** ‚Äî —ç—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. Kafka –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Kafka

### –ù–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (Latency)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ 1‚Äì10 –º—Å.
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è real-time –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

### –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (Throughput)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥—É.
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –ø—Ä–∏ –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

### –ì–∏–±–∫–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- –°–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫.
- –ú–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–ª–∏ –ª–∏–º–∏—Ç –æ–±—ä–µ–º–∞.

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π
- –°–æ–æ–±—â–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∫–æ–Ω—Å—å—é–º–µ—Ä–∞–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- Kafka –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –±—Ä–æ–∫–µ—Ä—ã –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Kafka: –¢–æ–ø–∏–∫–∏ –∏ –ü–∞—Ä—Ç–∏—Ü–∏–∏

### Topic
- –õ–æ–≥–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –¥–∞–Ω–Ω—ã—Ö (–∫–∞–∫ "–ø–∞–ø–∫–∞").
- –°–æ–¥–µ—Ä–∂–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–µ –≤ –æ—á–µ—Ä–µ–¥–∏.

### Partition
- –¢–æ–ø–∏–∫ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ **–ø–∞—Ä—Ç–∏—Ü–∏–∏** ‚Äî –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ, —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–µ –ª–æ–≥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.
- –ü–∞—Ä—Ç–∏—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ø–∏–∫ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ.

```text
Topic: "Orders"
Partition 0: [msg1, msg2, msg3]
Partition 1: [msg4, msg5, msg6]
Partition 2: [msg7, msg8, msg9]
Partition 3: [msg10, msg11, msg12]
```

---

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Kafka

### –ü—Ä–æ–¥—é—Å–µ—Ä—ã (Producers)
–ü—Ä–æ–¥—é—Å–µ—Ä—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–∞—Ä—Ç–∏—Ü–∏–∏ —Ç–æ–ø–∏–∫–∞. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –º–æ–∂–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å:
- —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º,
- —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ,
- –ø–æ **–∫–ª—é—á—É (key)** ‚Äî –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –∫–ª—é—á–æ–º –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ–¥–Ω—É –ø–∞—Ä—Ç–∏—Ü–∏—é.

### –ö–æ–Ω—Å—å—é–º–µ—Ä—ã (Consumers)
–ö–æ–Ω—Å—å—é–º–µ—Ä—ã —á–∏—Ç–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –ø–∞—Ä—Ç–∏—Ü–∏–π. –í —Ä–∞–º–∫–∞—Ö **–æ–¥–Ω–æ–π consumer-–≥—Ä—É–ø–ø—ã**:
- –ö–∞–∂–¥–∞—è –ø–∞—Ä—Ç–∏—Ü–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ **–æ–¥–Ω–∏–º** –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–º.
- –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤ –º–æ–≥—É—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –æ–¥–Ω–æ–≥–æ —Ç–æ–ø–∏–∫–∞.

---

## –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –ø–∞—Ä—Ç–∏—Ü–∏–∏?

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
–ü–∞—Ä—Ç–∏—Ü–∏–∏ –º–æ–≥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –±—Ä–æ–∫–µ—Ä–∞—Ö, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–ª–∞—Å—Ç–µ—Ä—É.

### –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏
–ö–∞–∂–¥–∞—è –ø–∞—Ä—Ç–∏—Ü–∏—è –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–º, –ø–æ–∑–≤–æ–ª—è—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π.

### –ü–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
–°–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ø–∞—Ä—Ç–∏—Ü–∏–π –º–æ–≥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, —á—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç throughput Kafka.

### ‚ö†–í–∞–∂–Ω–æ:
–ü–æ—Ä—è–¥–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏**.

---

## Offset ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

**Offset** ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–Ω–æ–º–µ—Ä) –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏.

–û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω—Å—å—é–º–µ—Ä–∞–º–∏ –¥–ª—è:
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –∫–∞–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —É–∂–µ –±—ã–ª–∏ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã.
- –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —á—Ç–µ–Ω–∏—è —Å –Ω—É–∂–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ.

### –ü—Ä–∏–º–µ—Ä:
```text
Messages: [msg1, msg2, msg3]
Offsets:  [  0 ,   1 ,   2 ]
```

–ï—Å–ª–∏ –∫–æ–Ω—Å—å—é–º–µ—Ä –¥–æ—à—ë–ª –¥–æ offset = 1, –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ –æ–Ω –Ω–∞—á–Ω—ë—Ç —Å offset = 2.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è Kafka

- **Key** ‚Äî –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—ã–±–æ—Ä –ø–∞—Ä—Ç–∏—Ü–∏–∏.
- **Value** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, JSON, —Å—Ç—Ä–æ–∫–∞, –±–∞–π—Ç—ã –∏ —Ç.–¥.).
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**:
  - Offset
  - Timestamp
  - Headers (–¥–æ–ø. –¥–∞–Ω–Ω—ã–µ)

---

## –ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ timestamp

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–†–∞–∑–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏**: —á–∞—Å—ã –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤ –∏ –±—Ä–æ–∫–µ—Ä–æ–≤ –º–æ–≥—É—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å.
2. **–°–µ—Ç–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏**: —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø—Ä–∏–π—Ç–∏ –ø–æ–∑–∂–µ, —á–µ–º –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ.
3. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ timestamp**: –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤ Kafka Streams.

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
–î–æ–±–∞–≤–ª—è–π—Ç–µ –ø–æ–ª–µ `event_time` –≤ value ‚Äî –æ–Ω–æ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –±–∏–∑–Ω–µ—Å-–≤—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —á–∞—Å–æ–≤.

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Kafka

- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏.
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è pub/sub-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
- –ü–æ—Ç–æ–∫–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Apache Spark, Flink, Hadoop.

---

## –ü—Ä–∏–º–µ—Ä—ã –±—Ä–æ–∫–µ—Ä–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π

| –¢–∏–ø                 | –ü—Ä–∏–º–µ—Ä—ã               | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                                |
|--------------------|-----------------------|--------------------------------------------|
| –û—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π  | RabbitMQ, Amazon SQS  | –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–∏—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–º |
| –ë—Ä–æ–∫–µ—Ä—ã (pub/sub)  | Apache Kafka, Google Pub/Sub | –°–æ–æ–±—â–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –º–Ω–æ–≥–∏–º –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º |

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç: [https://kafka.apache.org](https://kafka.apache.org)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [https://kafka.apache.org/documentation](https://kafka.apache.org/documentation)

---

# –ü—Ä–æ–¥—é—Å–µ—Ä—ã, –ö–æ–Ω—Å—å—é–º–µ—Ä—ã –∏ –ö–æ–Ω—Å—å—é–º–µ—Ä-–≥—Ä—É–ø–ø—ã –≤ Apache Kafka

Apache Kafka —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–æ–¥–µ–ª—å publish/subscribe, –≤ –∫–æ—Ç–æ—Ä–æ–π –¥–∞–Ω–Ω—ã–µ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è **–ø—Ä–æ–¥—é—Å–µ—Ä–∞–º–∏** (producers), –∞ –∑–∞—Ç–µ–º —á–∏—Ç–∞—é—Ç—Å—è **–∫–æ–Ω—Å—å—é–º–µ—Ä–∞–º–∏** (consumers). –î–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Å—å—é–º–µ—Ä—ã –º–æ–≥—É—Ç –æ–±—ä–µ–¥–∏–Ω—è—Ç—å—Å—è –≤ **–≥—Ä—É–ø–ø—ã –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π** (consumer groups).

---

## –ü—Ä–æ–¥—é—Å–µ—Ä—ã (Producers)

### –ö—Ç–æ —Ç–∞–∫–∏–µ?
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ —Å–µ—Ä–≤–∏—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ **—Ç–æ–ø–∏–∫–∏ Kafka**.

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

#### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º:
- –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω **–∫–ª—é—á (key)** ‚Äî Kafka –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏.
- –ï—Å–ª–∏ –∫–ª—é—á –Ω–µ –∑–∞–¥–∞–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è **round-robin** (—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ).

#### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞:
- –°–æ–æ–±—â–µ–Ω–∏—è –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –≤ **–±–∞—Ç—á–∏ (batches)** –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è**, —Ç–∞–∫ –∏ **—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è** –æ—Ç–ø—Ä–∞–≤–∫–∞.

#### –ì–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ (acks):
- `acks=0` ‚Äî –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–∏–∑–∫–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å).
- `acks=1` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç –ª–∏–¥–µ—Ä–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏.
- `acks=all` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç –≤—Å–µ—Ö —Ä–µ–ø–ª–∏–∫ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å).

---

### üõ†–û–ø–µ—Ä–∞—Ü–∏—è Produce

–ü—Ä–æ–¥—é—Å–µ—Ä —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤–∫–ª—é—á–∞–µ—Ç:
- **Key** ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—ã–±–æ—Ä –ø–∞—Ä—Ç–∏—Ü–∏–∏.
- **Value** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
- **Headers** ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).

–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Kafka-–±—Ä–æ–∫–µ—Ä –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü –ø–∞—Ä—Ç–∏—Ü–∏–∏. Kafka –Ω–∞–∑–Ω–∞—á–∞–µ—Ç **offset** –∏, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ `acks`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**  
`Producer ‚Üí Kafka Broker ‚Üí Partition`

---

### ‚öô–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–¥—é—Å–µ—Ä–∞:
- `acks` ‚Äî —É—Ä–æ–≤–µ–Ω—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
- `batch.size` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞.
- `linger.ms` ‚Äî –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –±–∞—Ç—á–∞.

---

## –ö–æ–Ω—Å—å—é–º–µ—Ä—ã (Consumers)
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ —Å–µ—Ä–≤–∏—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—á–∏—Ç—ã–≤–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —Ç–æ–ø–∏–∫–æ–≤ Kafka.

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

#### –ü–æ–¥–ø–∏—Å–∫–∞:
- –ö–æ–Ω—Å—å—é–º–µ—Ä –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–ø–∏–∫–æ–≤.
- Kafka –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∞—Ä—Ç–∏—Ü–∏–∏ –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ **–æ–¥–Ω–æ–π –≥—Ä—É–ø–ø—ã**.

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:
- –ß—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ø–æ—Ä—è–¥–∫–µ –∏—Ö –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è (–ø–æ offset).
- –ö–æ–Ω—Å—å—é–º–µ—Ä –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç **—Ç–µ–∫—É—â–∏–π offset** –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–±–æ—è—Ö.

#### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ:** offset –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏.
- **–†—É—á–Ω–æ–µ:** offset –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é ‚Äî –ø–æ–≤—ã—à–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å.

---

### –û–ø–µ—Ä–∞—Ü–∏—è Fetch

–ö–æ–Ω—Å—å—é–º–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å **Fetch** –∫ –±—Ä–æ–∫–µ—Ä—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –ø–∞—Ä—Ç–∏—Ü–∏–π, –Ω–∞—á–∏–Ω–∞—è —Å –Ω—É–∂–Ω–æ–≥–æ offset.

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**  
`Consumer ‚Üí Kafka Broker (Fetch Request) ‚Üí Consumer (Messages)`

---

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Å—å—é–º–µ—Ä–∞:
- `fetch.min.bytes` ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –æ—Ç–≤–µ—Ç–µ.
- `fetch.max.wait.ms` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –º–∞–ª–æ.
- `max.poll.records` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å.

---

## –ö–æ–Ω—Å—å—é–º–µ—Ä-–≥—Ä—É–ø–ø—ã (Consumer Groups)

- –°–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –æ–¥–Ω–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º** —É—á–∞—Å—Ç–Ω–∏–∫–æ–º –≥—Ä—É–ø–ø—ã.
- –†–∞–∑–Ω—ã–µ –≥—Ä—É–ø–ø—ã –º–æ–≥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ç–æ–ø–∏–∫ **–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ**.
- –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Kafka Producer API](https://kafka.apache.org/documentation/#producerapi)
- [Kafka Consumer API](https://kafka.apache.org/documentation/#consumerapi)

